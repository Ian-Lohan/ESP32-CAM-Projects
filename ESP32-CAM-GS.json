{"files":[{"id":"b9adcbc6-5f8e-4ff5-a47c-dd4056ced149","name":"appsscript","type":"json","source":"{\n  \"timeZone\": \"America/Fortaleza\",\n  \"dependencies\": {},\n  \"exceptionLogging\": \"STACKDRIVER\",\n  \"runtimeVersion\": \"V8\",\n  \"webapp\": {\n    \"executeAs\": \"USER_DEPLOYING\",\n    \"access\": \"ANYONE_ANONYMOUS\"\n  }\n}"},{"id":"ab278d81-966b-4862-b002-06196fd98b18","name":"CÃ³digo","type":"server_js","source":"function doPost(e) {\n  const name \u003d Utilities.formatDate(new Date(), \u0027GMT-3\u0027, \u0027yyyyMMdd-HHmmss\u0027) + \u0027.jpg\u0027  // Change GMT+7 with GMT in your area.\n  const subFolderName \u003d Utilities.formatDate(new Date(), \u0027GMT-3\u0027, \u0027yyyyMMdd\u0027)\n  const folderName \u003d e.parameters.folder || \u0027ESP32-CAM\u0027\n  const data \u003d Utilities.base64Decode(e.postData.contents)\n  const blob \u003d Utilities.newBlob(data, \u0027image/jpg\u0027, name)\n\n  let folder\n  const folders \u003d DriveApp.getFoldersByName(folderName)\n  if (folders.hasNext()) {\n    folder \u003d folders.next()\n  } else {\n    folder \u003d DriveApp.createFolder(folderName)\n  }\n  let subFolder\n  const subFolders \u003d folder.getFoldersByName(subFolderName)\n  if (subFolders.hasNext()) {\n    subFolder \u003d subFolders.next()\n  } else {\n    subFolder \u003d folder.createFolder(subFolderName)\n  }\n  const file \u003d subFolder.createFile(blob)\n  return ContentService.createTextOutput(\u0027Done\u0027)\n}"}]}